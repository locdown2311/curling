<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¥Œ Curling Multiplayer</title>
    <meta name="description" content="Jogo de Curling multiplayer online com salas e WebSocket">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- ===== NICKNAME SCREEN ===== -->
    <div id="nicknameScreen" class="screen active">
        <div class="lobby-bg"></div>
        <div class="lobby-container">
            <div class="lobby-header">
                <div class="logo-icon">ğŸ¥Œ</div>
                <h1>CURLING</h1>
                <p class="subtitle">Multiplayer Online</p>
            </div>
            <div class="lobby-card">
                <h2>Seu Apelido</h2>
                <div class="form-group">
                    <input type="text" id="nicknameInput" placeholder="Digite seu apelido..." maxlength="20"
                        autocomplete="off">
                </div>
                <div class="flag-picker">
                    <h3>Escolha seu PaÃ­s</h3>
                    <div class="flag-grid" id="flagGrid">
                        <button class="flag-btn" data-flag="ğŸ‡§ğŸ‡·" title="Brasil">ğŸ‡§ğŸ‡·</button>
                        <button class="flag-btn" data-flag="ğŸ‡¦ğŸ‡·" title="Argentina">ğŸ‡¦ğŸ‡·</button>
                        <button class="flag-btn" data-flag="ğŸ‡ºğŸ‡¸" title="EUA">ğŸ‡ºğŸ‡¸</button>
                        <button class="flag-btn" data-flag="ğŸ‡¨ğŸ‡¦" title="CanadÃ¡">ğŸ‡¨ğŸ‡¦</button>
                        <button class="flag-btn" data-flag="ğŸ‡¬ğŸ‡§" title="Reino Unido">ğŸ‡¬ğŸ‡§</button>
                        <button class="flag-btn" data-flag="ğŸ‡«ğŸ‡·" title="FranÃ§a">ğŸ‡«ğŸ‡·</button>
                        <button class="flag-btn" data-flag="ğŸ‡©ğŸ‡ª" title="Alemanha">ğŸ‡©ğŸ‡ª</button>
                        <button class="flag-btn" data-flag="ğŸ‡®ğŸ‡¹" title="ItÃ¡lia">ğŸ‡®ğŸ‡¹</button>
                        <button class="flag-btn" data-flag="ğŸ‡ªğŸ‡¸" title="Espanha">ğŸ‡ªğŸ‡¸</button>
                        <button class="flag-btn" data-flag="ğŸ‡µğŸ‡¹" title="Portugal">ğŸ‡µğŸ‡¹</button>
                        <button class="flag-btn" data-flag="ğŸ‡¯ğŸ‡µ" title="JapÃ£o">ğŸ‡¯ğŸ‡µ</button>
                        <button class="flag-btn" data-flag="ğŸ‡°ğŸ‡·" title="Coreia do Sul">ğŸ‡°ğŸ‡·</button>
                        <button class="flag-btn" data-flag="ğŸ‡¨ğŸ‡³" title="China">ğŸ‡¨ğŸ‡³</button>
                        <button class="flag-btn" data-flag="ğŸ‡·ğŸ‡º" title="RÃºssia">ğŸ‡·ğŸ‡º</button>
                        <button class="flag-btn" data-flag="ğŸ‡²ğŸ‡½" title="MÃ©xico">ğŸ‡²ğŸ‡½</button>
                        <button class="flag-btn" data-flag="ğŸ‡¸ğŸ‡ª" title="SuÃ©cia">ğŸ‡¸ğŸ‡ª</button>
                        <button class="flag-btn" data-flag="ğŸ‡³ğŸ‡´" title="Noruega">ğŸ‡³ğŸ‡´</button>
                        <button class="flag-btn" data-flag="ğŸ‡¨ğŸ‡­" title="SuÃ­Ã§a">ğŸ‡¨ğŸ‡­</button>
                        <button class="flag-btn" data-flag="ğŸ‡¦ğŸ‡º" title="AustrÃ¡lia">ğŸ‡¦ğŸ‡º</button>
                        <button class="flag-btn" data-flag="ğŸ‡¨ğŸ‡´" title="ColÃ´mbia">ğŸ‡¨ğŸ‡´</button>
                    </div>
                    <p class="flag-hint" id="flagHint">Selecione uma bandeira</p>
                </div>
                <button class="btn-start" id="btnSetNickname" disabled>
                    <span>Entrar nas Salas</span>
                    <span>â†’</span>
                </button>
            </div>
            <div class="lobby-footer">
                <p>Escolha um apelido e paÃ­s para jogar online</p>
            </div>
        </div>
    </div>

    <!-- ===== ROOM BROWSER SCREEN ===== -->
    <div id="roomBrowser" class="screen">
        <div class="room-browser-header">
            <div class="room-browser-title">
                <span class="room-icon">ğŸ </span>
                <h2>Salas DisponÃ­veis</h2>
            </div>
            <div class="room-browser-info">
                <span class="player-badge" id="myNickname">Jogador</span>
                <span class="online-count" id="onlineCount">0 online</span>
                <span class="version-badge" id="versionBadge">v1.1.0</span>
            </div>
        </div>
        <div class="room-grid" id="roomGrid">
            <!-- Rooms generated by JS -->
        </div>
    </div>

    <!-- ===== WAITING ROOM SCREEN ===== -->
    <div id="waitingRoom" class="screen">
        <div class="lobby-bg"></div>
        <div class="lobby-container">
            <div class="waiting-card">
                <div class="waiting-icon">â³</div>
                <h2>Sala <span id="waitingRoomId">1</span></h2>
                <p class="waiting-text">Aguardando oponente...</p>
                <div class="waiting-players" id="waitingPlayers">
                    <div class="waiting-player p1">
                        <span class="team-dot red"></span>
                        <span id="waitP1Name">â€”</span>
                    </div>
                    <div class="waiting-vs">VS</div>
                    <div class="waiting-player p2">
                        <span class="team-dot yellow"></span>
                        <span id="waitP2Name">Aguardando...</span>
                    </div>
                </div>
                <div class="waiting-spinner"></div>
                <button class="btn-leave" id="btnLeaveRoom">Sair da Sala</button>
            </div>
        </div>
    </div>

    <!-- ===== GAME SCREEN ===== -->
    <div id="gameScreen" class="screen">
        <div class="game-header">
            <div class="team-score team1-score" id="team1ScoreBox">
                <div class="hammer-indicator">ğŸ”¨</div>
                <span class="team-name" id="team1Label">Equipe Vermelha</span>
                <span class="score" id="score1">0</span>
            </div>
            <div class="game-info">
                <div class="end-info">
                    <span class="end-label">END</span>
                    <span class="end-number" id="endNumber">1</span>
                    <span class="end-total" id="endTotal">/ 8</span>
                </div>
                <div class="stones-left">
                    <span id="stonesInfo">Pedras: 8 / 8</span>
                </div>
                <div class="sweep-hint" id="sweepHint">
                    ğŸ§¹ Clique e arraste para varrer!
                </div>
                <div class="turn-indicator" id="turnIndicator">
                    <span class="turn-dot"></span>
                    <span id="turnText">Vez da Equipe Vermelha</span>
                </div>
                <div class="connection-status" id="connectionStatus">
                    <span class="conn-dot connected"></span>
                    <span>Conectado</span>
                </div>
            </div>
            <div class="team-score team2-score" id="team2ScoreBox">
                <span class="score" id="score2">0</span>
                <span class="team-name" id="team2Label">Equipe Amarela</span>
                <div class="hammer-indicator">ğŸ”¨</div>
            </div>
        </div>

        <!-- Live Partial Score Table -->
        <div class="live-score-table" id="liveScoreTable">
            <table>
                <thead>
                    <tr>
                        <th class="team-col">Equipe</th>
                        <th id="endH1">1</th>
                        <th id="endH2">2</th>
                        <th id="endH3">3</th>
                        <th id="endH4">4</th>
                        <th id="endH5">5</th>
                        <th id="endH6">6</th>
                        <th id="endH7">7</th>
                        <th id="endH8">8</th>
                        <th class="live-col">ğŸ”´</th>
                        <th class="total-col">Total</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="team1-row">
                        <td class="team-col" id="liveTeam1Name">Eq. 1</td>
                        <td id="e1t1">-</td>
                        <td id="e2t1">-</td>
                        <td id="e3t1">-</td>
                        <td id="e4t1">-</td>
                        <td id="e5t1">-</td>
                        <td id="e6t1">-</td>
                        <td id="e7t1">-</td>
                        <td id="e8t1">-</td>
                        <td class="live-col" id="liveT1">0</td>
                        <td class="total-col" id="totalT1">0</td>
                    </tr>
                    <tr class="team2-row">
                        <td class="team-col" id="liveTeam2Name">Eq. 2</td>
                        <td id="e1t2">-</td>
                        <td id="e2t2">-</td>
                        <td id="e3t2">-</td>
                        <td id="e4t2">-</td>
                        <td id="e5t2">-</td>
                        <td id="e6t2">-</td>
                        <td id="e7t2">-</td>
                        <td id="e8t2">-</td>
                        <td class="live-col" id="liveT2">0</td>
                        <td class="total-col" id="totalT2">0</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="game-area">
            <canvas id="gameCanvas"></canvas>

            <!-- Force Panel (appears after aim is locked) -->
            <div class="force-panel" id="forcePanel">
                <div class="force-panel-header">
                    <span class="force-label">FORÃ‡A</span>
                    <span class="force-value" id="forceValue">50%</span>
                </div>
                <div class="force-slider-track" id="forceSliderTrack">
                    <div class="force-slider-fill" id="forceSliderFill"></div>
                    <div class="force-slider-thumb" id="forceSliderThumb"></div>
                </div>
                <div class="force-panel-actions">
                    <button class="btn-cancel-aim" id="btnCancelAim">âœ• Cancelar</button>
                    <button class="btn-launch" id="btnLaunch">ğŸ¥Œ LanÃ§ar!</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== END-OF-END MODAL ===== -->
    <div class="modal-overlay" id="endModal">
        <div class="modal-card">
            <h2 id="endTitle">Fim do End 1</h2>
            <div class="modal-scores">
                <div class="modal-team">
                    <span class="modal-team-name" id="modalTeam1Name">Equipe Vermelha</span>
                    <span class="modal-team-points" id="modalTeam1Pts">0</span>
                </div>
                <span class="modal-vs">Ã—</span>
                <div class="modal-team">
                    <span class="modal-team-name" id="modalTeam2Name">Equipe Amarela</span>
                    <span class="modal-team-points" id="modalTeam2Pts">0</span>
                </div>
            </div>
            <div class="modal-totals">
                <span id="modalTotal1">0</span>
                <span>Total</span>
                <span id="modalTotal2">0</span>
            </div>
            <button class="btn-start" id="btnNextEnd"><span>PrÃ³ximo End â†’</span></button>
        </div>
    </div>

    <!-- ===== GAME OVER MODAL ===== -->
    <div class="modal-overlay" id="gameOverModal">
        <div class="modal-card game-over-card">
            <div class="trophy">ğŸ†</div>
            <h2 id="gameOverTitle">Fim de Jogo!</h2>
            <div class="final-score">
                <span id="finalScore1">0</span>
                <span class="final-vs">Ã—</span>
                <span id="finalScore2">0</span>
            </div>
            <button class="btn-start" id="btnBackToLobby">Voltar ao Lobby</button>
        </div>
    </div>

    <!-- ===== DISCONNECT MODAL ===== -->
    <div class="modal-overlay" id="disconnectModal">
        <div class="modal-card">
            <div style="font-size:48px;margin-bottom:12px">ğŸ˜¢</div>
            <h2>Oponente Desconectou</h2>
            <p id="disconnectMsg" style="color:#94a3b8;margin-bottom:24px">O jogador saiu da partida.</p>
            <button class="btn-start" id="btnDisconnectBack">Voltar ao Lobby</button>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="game.js"></script>
</body>

</html>